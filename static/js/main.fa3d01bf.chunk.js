(this["webpackJsonpgoit-react-hw-07-phonebook"]=this["webpackJsonpgoit-react-hw-07-phonebook"]||[]).push([[0],{24:function(t,e,n){t.exports={contactList:"contactList_contactList__1tv4c",enter:"contactList_enter__126zk",enterActive:"contactList_enterActive__1H0ft",exit:"contactList_exit__2Jbt6",exitActive:"contactList_exitActive__1TyF7"}},25:function(t,e,n){t.exports={page:"app_page__3fBfi",title:"app_title__2uBHV"}},28:function(t,e,n){},41:function(t,e,n){t.exports={contactItems:"contactItem_contactItems__7TXuI"}},44:function(t,e,n){t.exports=n(76)},55:function(t,e,n){},7:function(t,e,n){t.exports={formSection:"form_formSection__KoXNs",input:"form_input__I3VON",btn:"form_btn__Oz643"}},76:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),o=n(10),r=n.n(o),i=(n(49),n(5)),s=(n(55),n(77)),u=n(20),l=(n(28),n(40)),m=n(7),b=n.n(m),p=function(){return c.a.createElement("div",{className:"alert"},"Choose another name!")},f=n(9),O=Object(f.a)("phonebook/ADD_MY_CONTACT"),j=Object(f.a)("phonebook/DEL_MY_CONTACT"),d=Object(f.a)("phonebook/FILTERED_ITEMS"),v=Object(f.a)("phonebook/FORM_FETCH"),E=Object(f.a)("phonebook/FORM_SUCCESS"),h=Object(f.a)("phonebook/FORM_ERROR"),_=n(11),g=n.n(_),k=n(1),y=n(18),C=n(19),x=n.n(C),N={addMyContact:O},L=Object(i.b)((function(t){return{items:t.contacts.items}}),N)((function(t){var e=t.items,n=Object(a.useState)(""),o=Object(u.a)(n,2),r=o[0],m=o[1],f=Object(a.useState)(""),O=Object(u.a)(f,2),j=O[0],d=O[1],_=Object(a.useState)(!1),C=Object(u.a)(_,2),N=C[0],L=C[1],F=function(t){var e=t.target,n=e.value,a=e.name;"name"===a?m(n):"number"===a&&d(n)},S=Object(i.c)();return c.a.createElement(c.a.Fragment,null,c.a.createElement("form",{onSubmit:function(t){var n;t.preventDefault(),e.find((function(t){return t.name===r}))?(L(!0),setTimeout((function(){L(!1)}),2e3),m(""),d("")):(S((n={name:r,number:j,id:Object(l.v4)()},function(){var t=Object(y.a)(g.a.mark((function t(e,a){var c;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(v()),t.prev=1,t.next=4,x.a.post("https://phonebook-by-roman.firebaseio.com/contacts.json",n);case 4:c=t.sent,console.log("data post",c),e(E(Object(k.a)(Object(k.a)({},n),{},{id:c.data.name}))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(h(t.t0));case 12:return t.prev=12,e(v()),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(e,n){return t.apply(this,arguments)}}())),m(""),d(""))}},c.a.createElement(s.a,{in:N,classNames:"alert",timeout:2e3,unmountOnExit:!0},c.a.createElement(p,null)),c.a.createElement("div",{className:b.a.formSection},c.a.createElement("label",{className:b.a.label},"Name",c.a.createElement("input",{name:"name",type:"text",className:b.a.input,value:r,onChange:F,required:!0})),c.a.createElement("label",{className:b.a.label},"Number",c.a.createElement("input",{name:"number",type:"text",className:b.a.input,value:j,onChange:F,required:!0})),c.a.createElement("button",{type:"submit",className:b.a.btn},"Add Contact"))))})),F=n(41),S=n.n(F);var T={delMyContact:j,deleteContactOnFirebase:function(t){return function(){var e=Object(y.a)(g.a.mark((function e(n,a){var c;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("id",t),e.prev=1,e.next=4,x.a.delete("https://phonebook-by-roman.firebaseio.com/contacts/".concat(t,".json"));case 4:c=e.sent,console.log(c),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,n){return e.apply(this,arguments)}}()}},M=Object(i.b)((function(t){return{}}),T)((function(t){var e=t.deleteContactOnFirebase,n=t.delMyContact,a=t.contact,o=a.name,r=a.number,i=a.id;return c.a.createElement("li",{className:S.a.contactItems},c.a.createElement("p",null,o,": ",r),c.a.createElement("button",{type:"button","data-id":i,onClick:function(){return function(t){e(t),n(t)}(i)}},"Delete"))})),R=n(78),w=n(24),I=n.n(w);var A=Object(i.b)((function(t){return{x:t.contacts.filter.length>0?t.contacts.filter:t.contacts.items}}),{})((function(t){var e=t.x;return c.a.createElement(R.a,{component:"ul",className:I.a.contactList},e.map((function(t){return c.a.createElement(s.a,{key:t.id,timeout:250,classNames:I.a,unmountOnExit:!0},c.a.createElement(M,{key:t.id,contact:t}))})))}));var D={filteredItems:d},H=Object(i.b)((function(t){return{items:t.contacts.items}}),D)((function(t){var e=t.filteredItems,n=t.items;return c.a.createElement("div",{className:b.a.formSection},c.a.createElement("label",{className:b.a.label},"Find contacts by name",c.a.createElement("input",{onChange:function(t){var a,c=t.target.value,o=(a=c,n.filter((function(t){return t.name.toLowerCase().includes(a.toLowerCase())})));e(o)},type:"text",className:b.a.input,name:"filter",placeholder:"Enter name"})))})),Y=n(25),B=n.n(Y);var J,q={getFitebase:function(t){return function(){var t=Object(y.a)(g.a.mark((function t(e,n){var a,c,o;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,x.a.get("https://phonebook-by-roman.firebaseio.com/contacts.json");case 3:a=t.sent,c=Object.keys(a.data),o=c.reduce((function(t,e){return t.push(Object(k.a)({id:e},a.data[e])),t}),[]),e(O(o)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e,n){return t.apply(this,arguments)}}()}},z=Object(i.b)((function(t){return{items:t.contacts.items,isLoading:t.isLoading}}),q)((function(t){var e=t.items,n=t.getFitebase,o=t.isLoading;return Object(a.useEffect)((function(){n()}),[n]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:B.a.page},o&&c.a.createElement("h2",null,"...loading..."),c.a.createElement(s.a,{in:!0,timeout:500,classNames:"main-title",appear:!0,unmountOnExit:!0},c.a.createElement("h2",{className:B.a.title},"Phonebook")),c.a.createElement(L,null),e.length>1?c.a.createElement(H,null):null,c.a.createElement(A,null)))})),U=n(2),V=n(42),X=n(8),K=n(15),P=Object(f.b)({contacts:{items:[],filter:[]},isLoading:!1},(J={},Object(X.a)(J,"phonebook/ADD_MY_CONTACT",(function(t,e){var n=e.payload;return Object(k.a)(Object(k.a)({},t),{},{contacts:Object(k.a)(Object(k.a)({},t.contacts),{},{items:Object(K.a)(n)})})})),Object(X.a)(J,"phonebook/FORM_FETCH",(function(t,e){e.payload;return Object(k.a)(Object(k.a)({},t),{},{isLoading:!t.isLoading})})),Object(X.a)(J,"phonebook/FORM_SUCCESS",(function(t,e){var n=e.payload;return Object(k.a)(Object(k.a)({},t),{},{contacts:Object(k.a)(Object(k.a)({},t.contacts),{},{items:[].concat(Object(K.a)(t.contacts.items),[n])})})})),Object(X.a)(J,"phonebook/FORM_ERROR",(function(t,e){var n=e.payload;return Object(k.a)(Object(k.a)({},t),{},{contacts:Object(k.a)(Object(k.a)({},t.contacts),{},{items:[].concat(Object(K.a)(t.contacts.items),[n])})})})),Object(X.a)(J,"phonebook/DEL_MY_CONTACT",(function(t,e){var n=e.payload;return Object(k.a)(Object(k.a)({},t),{},{contacts:Object(k.a)(Object(k.a)({},t.contacts),{},{items:t.contacts.items.filter((function(t){return t.id!==n})),filter:t.contacts.filter.filter((function(t){return t.id!==n}))})})})),Object(X.a)(J,"phonebook/FILTERED_ITEMS",(function(t,e){var n=e.payload;return Object(k.a)(Object(k.a)({},t),{},{contacts:Object(k.a)(Object(k.a)({},t.contacts),{},{filter:Object(K.a)(n)})})})),J)),W=[function(t){var e=t.dispatch,n=t.getState;return function(t){return function(a){return"function"===typeof a?a(e,n):t(a)}}}],G=Object(U.createStore)(P,Object(V.composeWithDevTools)(U.applyMiddleware.apply(void 0,W)));r.a.render(c.a.createElement(i.a,{store:G},c.a.createElement(z,null)),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.fa3d01bf.chunk.js.map